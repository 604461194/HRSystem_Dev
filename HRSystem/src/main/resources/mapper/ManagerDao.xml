<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.kevin.HRSystem.dao.ManagerDao">
    <insert id="save" parameterType="Manager" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO employee_inf(emp_type, emp_name, emp_pass, emp_salary, dept_name) VALUES (#{type}, #{name}, #{password}, #{saraly}, #{departmentName})
    </insert>

    <delete id="delete" parameterType="long">
        DELETE FROM employee_inf WHERE emp_id=#{id}
    </delete>

    <update id="update" parameterType="Manager">
        UPDATE employee_inf SET emp_name=#{name}, emp_pass=#{password}, emp_salary=#{saraly}, emp_type=#{type}, WHERE emp_id=#{id}
    </update>

    <!--查询语句 start-->
    <select id="findAll">
        SELECT * FROM application_inf
    </select>

    <select id="findById" parameterType="long" resultMap="ManagerResultMap">
        SELECT * FROM employee_inf WHERE emp_id=#{id}
    </select>

    <select id="findByNameAndPass" resultMap="ManagerResultMap">
        SELECT * FROM  employee_inf WHERE emp_name=#{name} and emp_pass=#{password} and emp_type=2
    </select>

    <select id="findByName" resultMap="ManagerResultMap">
        SELECT * FROM employee_inf WHERE emp_name=#{name} and emp_type=2
    </select>

    <!--查询语句 end -->

    <resultMap id ="ManagerResultMap" type="com.kevin.HRSystem.model.Manager">
        <id property="id" column="emp_id"/>
        <result property="type" column="emp_type"/>
        <result property="name" column="emp_name"/>
        <result property="password" column="emp_pass"/>
        <result property="salary" column="emp_salary"/>
        <result property="departmentName" column="dept_name"/>
        <collection property="employees" column="emp_id" ofType="com.kevin.HRSystem.model.Employee" select="com.kevin.HRSystem.dao.EmployeeDao.findEmployeesByMgrId"/>
    </resultMap>


</mapper>